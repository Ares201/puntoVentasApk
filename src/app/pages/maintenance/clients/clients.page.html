<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Clientes</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openAddClientModal()">
        <ion-icon slot="icon-only" name="add-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-accordion-group *ngFor="let client of clients; let i = index" expand="inset">
    <ion-accordion>
      <ion-item slot="header" color="light" lines="none" class="ion-align-items-center compact-item">
        <ion-label><strong>{{ i + 1}}</strong>. {{client.fullName }}</ion-label>
        <ion-chip color="success" *ngIf="client.creditAmount">
          <ion-label>Crédito: S/{{ client.creditAmount }}</ion-label>
        </ion-chip>
        <ion-button (click)="editClient(client)">
          <ion-icon slot="icon-only" name="create-outline"></ion-icon>
        </ion-button>
      </ion-item>
      <ion-card color="light" slot="content">
        <ion-button color="danger" (click)="deleteClient(client)">
          <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
          Eliminar Cliente
        </ion-button>
        <ion-card-header>
          <ion-card-title>Configurar Crédito</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-item>
            <ion-label position="stacked">Monto Máximo</ion-label>
            <ion-input
              type="number"
              [(ngModel)]="client.creditAmount"
              placeholder="Ingrese el monto"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Contacto de Referencia</ion-label>
            <ion-input
              type="text"
              [(ngModel)]="client.referenceContact"
              placeholder="Nombre o teléfono"></ion-input>
          </ion-item>
        </ion-card-content>
        <ion-footer class="modal-actions">
          <ion-button expand="full" color="primary" (click)="saveCreditDetails(client)">
            Guardar
          </ion-button>
          <ion-button expand="full" color="medium" (click)="toggleCreditModal(client)">
            Cancelar
          </ion-button>
        </ion-footer>
      </ion-card>
    </ion-accordion>
  </ion-accordion-group>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title>Tienda Apolo- 2024</ion-title>
  </ion-toolbar>
</ion-footer>
